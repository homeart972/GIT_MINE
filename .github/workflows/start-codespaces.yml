name: Start GitHub Codespaces

on:
  workflow_dispatch:  # Permet de lancer manuellement
  schedule:
    - cron: '45 18 * * *'  # DÃ©clenche Ã  18h45 UTC
    - cron: '45 19 * * *'  # RedÃ©marrage Ã  19h45 si besoin

jobs:
  start-codespace:
    runs-on: ubuntu-latest
    steps:
      - name: Start Codespace
        run: |
          codespace_name=$(gh codespace list --json name,state | jq -r '.[] | select(.state=="Shutdown") | .name')
          if [ -n "$codespace_name" ]; then
            echo "ðŸ”„ RedÃ©marrage du Codespace : $codespace_name"
            gh codespace start --repo homeart972/GIT_MINE --name "$codespace_name"
          else
            echo "âœ… Aucun Codespace Ã  redÃ©marrer."
          fi
        env:
          GH_TOKEN: ${{ secrets.GH_PAT2 }}  # Utilisation du token personnel


